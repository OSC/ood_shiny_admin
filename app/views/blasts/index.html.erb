<div class="page-header">
  <h2>BLAST Searches <small>Data loaded <span id="loaded_at"></span> (Reload the browser to see updated data)</small></h2>
</div>

<script>
(function(){
  var loaded_at = moment(),
  update_loaded_at = function(){
    $('#loaded_at').text(loaded_at.fromNow());
  }

  setInterval(update_loaded_at, 60);
})();
</script>

<div class="row">
  <div class="panel">
    <%= link_to "New BLAST Search", new_blast_path, :class => 'btn btn-large btn-info' %>
  </div>
</div>

<div class="row">
  <table class="table">
    <thead>
    <tr>
      <th>#</th>
      <th>Job ID</th>
      <th>Status</th>
      <th>Name</th>
      <th>Sequence</th>
      <th class="no-sort"></th>
      <th class="no-sort"></th>
      <th class="no-sort"></th>
      <th class="no-sort"></th>
      <th class="no-sort"></th>
    </tr>
    </thead>

    <tbody>
    <% @blasts.reverse_each do |blast| %>
        <tr>
          <td><%= blast.id %></td>
          <td><%= blast.jobids %></td>
          <td><%= status_label(blast) %></td>
          <td><%= blast.name %></td>
          <td style="max-width: 200px; word-wrap: break-word;"><%= blast.sequence %></td>
          <td><%= link_to 'Submit', submit_blast_path(blast), method: :put, class: 'btn btn-success btn-sm' unless blast.submitted? %></td>
          <td><%= link_to 'Show', blast, class: 'btn btn-primary btn-sm' %></td>
          <td><%= link_to 'Edit', edit_blast_path(blast), class: 'btn btn-default btn-sm' unless blast.submitted? %></td>
          <td><%= link_to 'Copy', copy_blast_path(blast), method: :put, class: 'btn btn-default btn-sm' %></td>
          <td><%= link_to 'Destroy', blast, method: :delete, class: 'btn btn-danger btn-sm', data: { confirm: 'Are you sure?' } %></td>
        </tr>
    <% end %>
    </tbody>
  </table>
</div>
<br>
